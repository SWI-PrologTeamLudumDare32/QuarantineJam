<!DOCTYPE html>
<script src="/static/vendor/mithril-2.0.4.js"></script>

<div id="app"></div>

<script>
  let data = null
  let oops = ''

const App = {
  view() {
    return m('div',
      m('h2', 'The XMLHttpRequest Object'),
      m('button', {
        onclick: loadDoc
      }, 'buy cow'),
      data && m('pre', JSON.stringify(data, undefined, 2)),
      oops && m('pre', oops)
    )
  }
}

async function loadDoc() {
  const response = await m.request({
    method: 'POST',
    url: '/game_turn',
    body: { add: ['cow'] , remove: ['money']}
  })

  data = response.result
  oops = response.error
}

m.mount(document.getElementById('app'), App)
</script>
